<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Post Create V2 Component Test</title>

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />

    <!-- Font Awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/post-create-v2.css" />

    <style>
      body {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        padding: 2rem 0;
      }

      .test-container {
        max-width: 800px;
        margin: 0 auto;
        padding: 0 1rem;
      }

      .test-header {
        text-align: center;
        color: white;
        margin-bottom: 2rem;
      }

      .test-header h1 {
        font-size: 2.5rem;
        font-weight: 700;
        margin-bottom: 0.5rem;
        text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
      }

      .test-header p {
        font-size: 1.125rem;
        opacity: 0.9;
      }

      .responsive-test {
        background: white;
        border-radius: 16px;
        padding: 2rem;
        margin-bottom: 2rem;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
      }

      .test-info {
        background: #f8f9fa;
        border-radius: 12px;
        padding: 1.5rem;
        margin-bottom: 2rem;
      }

      .test-info h3 {
        color: #311555;
        margin-bottom: 1rem;
      }

      .test-info ul {
        margin: 0;
        padding-left: 1.5rem;
      }

      .test-info li {
        margin-bottom: 0.5rem;
        color: #4a5568;
      }

      .screen-size-indicator {
        position: fixed;
        top: 20px;
        right: 20px;
        background: rgba(0, 0, 0, 0.8);
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 8px;
        font-size: 0.875rem;
        font-weight: 600;
        z-index: 1000;
      }

      @media (max-width: 768px) {
        .test-header h1 {
          font-size: 2rem;
        }

        .test-header p {
          font-size: 1rem;
        }

        .responsive-test {
          padding: 1.5rem;
          margin-bottom: 1.5rem;
        }

        .screen-size-indicator {
          top: 10px;
          right: 10px;
          padding: 0.375rem 0.75rem;
          font-size: 0.75rem;
        }
      }

      @media (max-width: 480px) {
        body {
          padding: 1rem 0;
        }

        .test-container {
          padding: 0 0.5rem;
        }

        .test-header h1 {
          font-size: 1.75rem;
        }

        .responsive-test {
          padding: 1rem;
        }
      }
    </style>
  </head>
  <body>
    <!-- Screen Size Indicator -->
    <div class="screen-size-indicator" id="screenSizeIndicator">
      <span id="screenSizeText">Desktop</span>
    </div>

    <div class="test-container">
      <!-- Test Header -->
      <div class="test-header">
        <h1>Post Create V2 Component</h1>
        <p>Enhanced Mobile-First Post Creation Component</p>
      </div>

      <!-- Test Information -->
      <div class="test-info">
        <h3>Component Features</h3>
        <ul>
          <li>
            <strong>Mobile-First Design:</strong> Optimized for touch
            interactions and small screens
          </li>
          <li>
            <strong>Responsive Layout:</strong> Adapts perfectly to all screen
            sizes
          </li>
          <li>
            <strong>Auto-Resize Textarea:</strong> Grows with content up to a
            maximum height
          </li>
          <li>
            <strong>Character Counter:</strong> Visual feedback with color-coded
            warnings
          </li>
          <li>
            <strong>Photo Upload:</strong> Drag & drop with preview
            functionality
          </li>
          <li>
            <strong>Loading States:</strong> Smooth loading animations and
            disabled states
          </li>
          <li>
            <strong>Accessibility:</strong> Full keyboard navigation and screen
            reader support
          </li>
          <li>
            <strong>Modern UI:</strong> Beautiful gradients, shadows, and
            animations
          </li>
        </ul>
      </div>

      <!-- Component Test -->
      <div class="responsive-test">
        <%- include('layouts/components/post-create-v2', { user: { firstName:
        'Test User', avatar: '/images/default-avatar.png' }, formId:
        'createPostFormV2', textareaId: 'postContentV2', photoId: 'postPhotoV2',
        buttonId: 'createPostBtnV2', charCountId: 'charCountV2', placeholder:
        'What\'s on your mind, Test User?', maxLength: 250, showPhotoUpload:
        true, showCharCount: true, onSubmit: 'createPostV2()' }) %>
      </div>

      <!-- Test Instructions -->
      <div class="test-info">
        <h3>Test Instructions</h3>
        <ul>
          <li>
            Try typing in the textarea - notice the auto-resize and character
            counter
          </li>
          <li>
            Test the photo upload button - select an image to see the preview
          </li>
          <li>Resize your browser window to test responsive behavior</li>
          <li>Try keyboard shortcuts: Ctrl+Enter to submit</li>
          <li>Test on mobile devices for touch interactions</li>
          <li>
            Check accessibility with screen readers and keyboard navigation
          </li>
        </ul>
      </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Custom JS -->
    <script src="/js/post-create-v2.js"></script>

    <script>
      // Screen size indicator
      function updateScreenSizeIndicator() {
        const indicator = document.getElementById("screenSizeIndicator");
        const text = document.getElementById("screenSizeText");
        const width = window.innerWidth;

        let size = "Desktop";
        if (width <= 480) {
          size = "Small Mobile";
        } else if (width <= 768) {
          size = "Mobile";
        } else if (width <= 1024) {
          size = "Tablet";
        } else if (width <= 1440) {
          size = "Desktop";
        } else {
          size = "Large Desktop";
        }

        text.textContent = `${size} (${width}px)`;
      }

      // Update on load and resize
      updateScreenSizeIndicator();
      window.addEventListener("resize", updateScreenSizeIndicator);

      // Mock notification system for testing
      window.showNotification = function (message, type = "info") {
        const colors = {
          success: "#10b981",
          error: "#ef4444",
          warning: "#f59e0b",
          info: "#3b82f6",
        };

        const notification = document.createElement("div");
        notification.style.cssText = `
                position: fixed;
                top: 20px;
                left: 50%;
                transform: translateX(-50%);
                background: ${colors[type] || colors.info};
                color: white;
                padding: 1rem 2rem;
                border-radius: 8px;
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
                z-index: 10000;
                font-weight: 600;
                max-width: 90%;
                text-align: center;
            `;
        notification.textContent = message;

        document.body.appendChild(notification);

        setTimeout(() => {
          notification.remove();
        }, 3000);
      };

      // Mock post refresh for testing
      window.postManager = {
        loadPosts: function (refresh = false) {
          console.log("Mock: Refreshing posts...", { refresh });
          window.showNotification("Posts refreshed! (Mock)", "success");
        },
      };

      // Mock user avatar if not provided
      document.addEventListener("DOMContentLoaded", function () {
        const avatar = document.querySelector(".user-avatar");
        if (avatar && !avatar.src.includes("default-avatar.png")) {
          avatar.src =
            "https://via.placeholder.com/48x48/311555/ffffff?text=TU";
        }
      });
    </script>
  </body>
</html>
